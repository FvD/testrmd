---
title: "an example of testing"
author: "everyone"
date: "`r Sys.time()`"
---

```{css}
.testrmd-section {
  padding: 10px;
}
.testrmd-section.pass {
  background-color: #CCFFCC;
}
```

```{r setup}
knitr::knit_hooks$set(
  chunk = function(x, options) {
    if (isTRUE(options$test)) {
      paste0(
        "<div class='testrmd-section pass'>",
        paste(x, collapse = "\n"),
        "</div>"
      )
    } else {
      x
    }
  }
)

run_function <- function(code){
  try(code)
}

knitr::opts_chunk$set(error = TRUE)
```

## Do Some Tests

### assertthat

```{r passing_test, test = TRUE}
library(assertthat)
y <- "hello"

assert_that(is.character(y))
```

```{r failing_test, test = TRUE}
assert_that(is.numeric(y))
```

### assertr

```{r assertr_test, test = TRUE}
library(assertr)
assert_rows(mtcars, num_row_NAs, within_bounds(0,2), mpg:carb)
```

```{r assertr_test2, test = TRUE}
assert_rows(mtcars, num_row_NAs, within_bounds(2,4), mpg:carb)
```


### ensurer
```{r, test = TRUE}
library(ensurer)
y <- 3

ensure_that(y, is.numeric)
```

```{r, test = TRUE}
ensure_that(y, is.character)
```

### assertive

```{r assertive_test1, test = TRUE}
library(assertive)
counts <- c(1, 2, 3, 4.5)
assertive::assert_is_numeric(counts)
assertive::assert_all_are_non_negative(counts)
assertive::assert_all_are_whole_numbers(counts)
```

### stopifnot

```{r stopifnot_test, test = TRUE}
counts <- c(1, 2, 3, 4.5)
base::stopifnot(
  is.numeric(counts),
  all(counts >= 0),
  isTRUE(all.equal(counts, round(counts)))
)
```

### tester

```{r tester_test, test = TRUE}
library(tester)

# positive
is_positive(5)
is_positive(0)
is_positive(-3)

# negative
is_negative(5)
is_negative(0)
is_negative(-3)

# integer
is_integer(pi)
is_integer(1)
is_integer(1L)
is_integer(1.0)
is_integer(1.1)

# compared to 'is.integer'
is.integer(1L)
is.integer(1)
is.integer(as.integer(1))
is.integer(1.0)
is.integer(1.1)
```


## Do Some Analysis

```{r}
head(mtcars)
```

